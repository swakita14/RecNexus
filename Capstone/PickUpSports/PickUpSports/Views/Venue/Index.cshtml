@model List<PickUpSports.Models.ViewModel.VenueViewModel>
@{
    ViewBag.Title = "Sports Venues";
}

<h2><i>Local Sports Venues</i></h2>
<hr />


<div class="w3-container">
    <h3>Google Map</h3>
    <div class="map-canvas" id="map"></div>
</div>

<div class="row">

    <center class="form-inline">
        <form class="form-inline">
            <div class="form-group">
                <label for="endtime">Starting Time:</label>
                <input type="text" class="form-control" id="starting" name="starting" pattern="([01]?[0-9]|2[0-3]):[0-5][0-9]" required> &nbsp;
            </div>

            <div class="form-group">
                <label for="day">Day of Week:</label>
                @Html.DropDownList("day", new SelectList(Enum.GetValues(typeof(DayOfWeek))), new { @class = "form-control"})  &nbsp;
            </div>
            <button type="submit" class="btn btn-default">Find Available Venues</button> &nbsp;
        </form>
        <br />
        <button class="btn btn-default"> @Html.ActionLink("SortByRating", "Index", new { sortBy = ViewBag.RateSort })</button>


    </center>
  
</div>

<div ng-app="myApp">
    <div ng-controller="SortController" data-ng-init="init(@Newtonsoft.Json.JsonConvert.SerializeObject(Model))">
        <input type ="number" name="Distance" min ="1" max ="100" />
        <div class="w3-row-padding w3-center w3-theme-l1" ng-repeat="venue in venues ">
            <div class="row">
                {{venue.Name}}
            </div>
            <div class="row" ng-model="venue">
                {{venue.Address1}}, {{venue.City}}, {{venue.State}}, {{venue.ZipCode}}
            </div>
            <div class="row">
                {{venue.Phone}}
            </div>

            <div class="row">
                <br />@{
                    var url = Url.Action("Details", "Venue", new { id = "{{id=venue.VenueId}}" });
                    url = HttpUtility.UrlDecode(url);
                }
                <a data-ng-href="@url">Click here to view venue details</a>
            </div>
            <br />
            <button class="btn btn-default" ng-click="showMe()">Show me</button>
            <hr />
        </div>

    </div>
</div>



@section PageScript{

    @Scripts.Render("~/bundles/jquery")
    @Scripts.Render("~/bundles/angularapp")
    <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAhpsA4b1SN5lLKDWItkbWRc6vCqf-b87M&callback=initMap"
            type="text/javascript"></script>
}




