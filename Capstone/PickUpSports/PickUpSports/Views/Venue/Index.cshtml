@using PickUpSports.Controllers
@model List<PickUpSports.Models.ViewModel.VenueViewModel>
@{
    ViewBag.Title = "Sports Venues";
}

<h2><i>Local Sports Venues</i></h2>
<hr />


<div class="w3-container">
    <h3>Google Map</h3>
    <div class="map-canvas" id="map"></div>
</div>

<div class="row">

    <center class="form-inline">
        <form class="form-inline">
            <div class="form-group">
                <label for="endtime">Starting Time:</label>
                <input type="text" class="form-control" id="starting" name="starting" pattern="([01]?[0-9]|2[0-3]):[0-5][0-9]" required> &nbsp;
            </div>

            <div class="form-group">
                <label for="day">Day of Week:</label>
                @Html.DropDownList("day", new SelectList(Enum.GetValues(typeof(DayOfWeek))), new { @class = "form-control"})  &nbsp;
            </div>
            <button type="submit" class="btn btn-default">Find Available Venues</button> &nbsp; <p style="color:red">@ViewBag.Message</p>
            
        </form>
        <br />
        <button class="btn btn-default"> @Html.ActionLink("SortByRating", "Index", new { sortBy = ViewBag.RateSort })</button>


    </center>
  
</div>


<input type="number" name="Distance" min="1" max="100" />
@foreach (var venue in Model)
{
    <div class="container">
        <div class="row">
            @Html.DisplayFor(model => venue.Name)
        </div>
        <div class="row">
            @Html.DisplayFor(model => venue.Address1), @Html.DisplayFor(model => venue.City), @Html.DisplayFor(model => venue.State), @Html.DisplayFor(model => venue.ZipCode)
        </div>
        <div class="row">
            @Html.DisplayFor(model => venue.Phone)
        </div>
        <div class="row">
            @Html.DisplayFor(model => venue.Distance)
        </div>

        <div class="row">
            <br />@Html.ActionLink("Click here to view ratings and buisness hours", "Details", new { id = venue.VenueId })



        </div>

    </div>
    <hr />
}

@section PageScript
{
    @Scripts.Render("~/bundles/jquery")
    <script type="text/javascript">
        $(document).ready(function () {})
       
      
        window.navigator.geolocation.getCurrentPosition(function(position) {
            var userLat = position.coords.latitude;
            var userLong = position.coords.longitude;

            $.ajax({
                url: '/Venue/Index',
                type: 'GET',
                dataType: "json",
                data: JSON.stringify({ curLat: userLat, curLong: userLong }),
                success: function (data) {
                    alert(data);
                },
                error: function (errMsg) {
                    alert(errMsg);
                }
            });
        });
           

       

           
        }


    </script>


}



