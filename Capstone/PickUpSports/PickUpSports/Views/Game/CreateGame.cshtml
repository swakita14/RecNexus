@model PickUpSports.Models.ViewModel.GameController.CreateGameViewModel

@{
    ViewBag.Title = "Start a New Game";
}

@Styles.Render("https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css")

@section Scripts
{
    <script src="https://cdn.jsdelivr.net/momentjs/latest/moment.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>

    <script>
        $(function () {
            $('input[name="datetimes"]').daterangepicker({
                timePicker: true,
                startDate: moment().startOf('hour'),
                endDate: moment().startOf('hour').add(32, 'hour'),
                locale: {
                    format: 'MM/DD//YYYY hh:mm A'
                }
            });
            $('#datetimes').daterangepicker({
                timePicker: true,
                startDate: moment().startOf('hour'),
                endDate: moment().startOf('hour').add(32, 'hour'),
                locale: {
                    format: 'MM/DD/YYYY hh:mm A'
                }
            });
        });

        var update = function getVenueBusinessHours() {

            var id = $("#id").val();
            $.ajax({
                    type: "GET",
                    url: "../../Bid/BidsByItem/" + id
                })
                .done(function(partialViewResult) {
                    $("#bids").html(partialViewResult);
                });
        };
    </script>

}

@using (Html.BeginForm("CreateGame", "Game", FormMethod.Post))
{
    <div class="container">
        <div class="row">
            <div class="form-box">
                <h1>Start a New Game</h1>
                <form role="form" id="game-form">

                    @if (!ViewData.ModelState.IsValid)
                    {
                        <div class="row">
                            <div class="col-md-12">
                                @Html.ValidationSummary(false, null, new { @class = "text-danger" })

                            </div>
                        </div>
                    }
                    <!-- Venue field -->
                    <div class="form-group">
                        @Html.DropDownListFor(
                            x => x.VenueId,
                            new SelectList(ViewBag.Venues, "Key", "Value"),
                            "Select a Venue",
                            new {@class = "form-control"})
                    </div>
                    <!-- Sport field -->
                    <div class="form-group">
                        @Html.DropDownListFor(
                            x => x.SportId,
                            new SelectList(ViewBag.Sports, "Key", "Value"),
                            "Select a Sport",
                            new {@class = "form-control"})
                    </div>
                    <!-- Date field -->
                    <div class="form-group">
                        @Html.DisplayNameFor(x => x.DateRange)
                        @Html.EditorFor(x => x.DateRange, new { htmlAttributes = new { @class = "form-control", name = "datetimes", @id = "datetimes" } })
                    </div>

                    <div id="bids">
                        <div class="form-group">
                            @*Partial view updated by ajax call in bidUpdate.js*@
                        </div>
                    </div>

                    <div class="form-group">
                        <button type="submit" class="btn btn-default">Create Your Game</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
}
